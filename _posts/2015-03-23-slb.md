---
layout: post
title: SLB
category : 架构
tagline: "Supporting tagline"
tags : [SLB,架构 ]
---
{% include JB/setup %}
## SLB 软负载
---

>负载是分布式系统中极为普遍的技术之一。在分布式环境中，为了保证高可用性，通常同一个应用或同一个服务的提供方都会部署多份，以达到对等服务。而软负载就像一个引路人，帮助服务的消费者在这些对等的服务中合理地选择一个来执行相关的业务逻辑。

>阿里的软负载系统采用的配置中心实现的

具体来说就是所有的请求 通过 `发布` \ `订阅` 的模式来导流，下面举个例子：
当用户访问 test.alipay.com\test\1 的时候 后端有订阅了该类消息的服务器，也就是 在`ConfigServer` 中设置了对应于该消息（把路由统一表述为消息）的后端服务器
这样该请求到了`ConfigServer`后 `ConfigServer` 根据之前的订阅查找到是`test服务`订阅此消息，就把请求转发到了该服务器

>DP 的SLB 是基于nginx 的规则匹配和转发 
DP 之前采用的`F5` 7层路由硬件软负载， 虽然F5功能强大，但是不擅长规则匹配，即F5做规则匹配时会消耗大量的CPU资源，导致性能急剧下降。 鉴于此种原因，DP 进行了SLB得研发，用SLB做7层路由转发，而F5做基本的4层路由。

具体实现细节，明晚继续。。。
//TODO SLB 架构设计图 && 应用降级 && 灰度发布
